let showTesting=!1,cards=["♠A","♠2","♠3","♠4","♠5","♠6","♠7","♠8","♠9","♠10","♠J","♠Q","♠K","♦A","♦2","♦3","♦4","♦5","♦6","♦7","♦8","♦9","♦10","♦J","♦Q","♦K","♣A","♣2","♣3","♣4","♣5","♣6","♣7","♣8","♣9","♣10","♣J","♣Q","♣K","♥A","♥2","♥3","♥4","♥5","♥6","♥7","♥8","♥9","♥10","♥J","♥Q","♥K"],extraCards=["wc","wc","wc"],currentHand=1,totalScore=0,activeHands=["hand1","hand2","hand3"],hands={hand1:[],hand2:[],hand3:[],hand4:[],hand5:[],hand6:[],hand7:[],hand8:[],hand9:[],hand10:[]},handScores={hand1:0,hand2:0,hand3:0,hand4:0,hand5:0,hand6:0,hand7:0,hand8:0,hand9:0,hand10:0},handNames={hand1:"",hand2:"",hand3:"",hand4:"",hand5:"",hand6:"",hand7:"",hand8:"",hand9:"",hand10:""};const baseValues={"high card":5,pair:10,"2 pair":20,"3 of a kind":30,straight:40,flush:50,"full house":60,"4 of a kind":80,"straight flush":100,"royal flush":100},deal=()=>{for(let e=1;e<=10;e++){hands[`hand${e}`]=[];for(let a=0;a<5;a++){const a=Math.floor(Math.random()*cards.length);hands[`hand${e}`].push(cards[a]),cards.splice(a,1)}}extraCards.unshift(cards[1]),cards.splice(1,1),extraCards.unshift(cards[0]),cards.splice(0,1),createCards(hands.hand1),console.log(hands.hand1),calcHandScore(currentHand)};function createCardElement(e){const a=document.createElement("li");if("wc"!==e){const t=e[0],n=e.substring(1);switch(a.innerHTML=`<span class="card-first-no">${n}</span>\n\t\t\t\t\t\t  <span class="card-suit">${t}</span>\n\t\t\t\t\t\t  <span class="card-second-no">${n}</span>`,a.classList.add("card"),a.setAttribute("data-number",n),a.setAttribute("data-card",e),t){case"♠":a.classList.add("spade"),a.setAttribute("data-suit","spade");break;case"♦":a.classList.add("diamond"),a.setAttribute("data-suit","diamond");break;case"♣":a.classList.add("club"),a.setAttribute("data-suit","club");break;case"♥":a.classList.add("heart"),a.setAttribute("data-suit","heart")}}return a}const createCards=e=>{const a=document.createElement("ul");a.classList.add("hand"),a.dataset.hand=currentHand,a.id=`hand${currentHand}`,e.forEach((e=>{const t=createCardElement(e);a.append(t)}));const t=document.createElement("li");t.classList.add("hand-confirm-wrap"),a.append(t),document.querySelector(".card-area").append(a),initSortableForHand(`hand${currentHand}`)},renderHand=e=>{const a=e.replace("hand",""),t=document.getElementById(e);t&&(t.querySelectorAll("li.card").forEach((e=>e.remove())),hands[e].forEach((e=>{const a=createCardElement(e);t.insertBefore(a,t.querySelector(".hand-confirm-wrap"))})),calcHandScore(Number(a)))},confirmHand=()=>{currentHand<10?(currentHand++,console.log(`current hand: ${currentHand}`),createCards(hands[`hand${currentHand}`])):document.getElementById("hand-confirm").style.display="none",calcHandScore(currentHand)};function swapCards(e,a,t,n){const d=e[a];e[a]=t[n],t[n]=d,console.log("Hands after swap:",e,t),console.log("Current hand:",currentHand),Array.from({length:currentHand},((e,a)=>a+1)).forEach((e=>{calcHandScore(e)}))}const initializedHands=new Set;function initSortableForHand(e){console.log("initSortableForHand called for:",e);const a=document.getElementById(e);a?a&&!initializedHands.has(e)&&(Sortable.create(a,{group:"cards",animation:150,swap:!0,swapClass:"highlight",onEnd:function(e){const a=e.item,t=document.elementFromPoint(e.originalEvent.clientX,e.originalEvent.clientY),n=t?.closest("li.card");if(n&&n!==a){const a=`hand${e.from.dataset.hand}`,t=`hand${e.to.dataset.hand}`,n=e.oldIndex,d=e.newIndex;swapCards(hands[a],n,hands[t],d),renderHand(a),renderHand(t)}else{const a=`hand${e.to.dataset.hand}`;hands[a]=[...e.to.querySelectorAll("li.card")].map((e=>e.dataset.card))}}}),initializedHands.add(e)):console.warn("Element not found for:",e)}const moveInHand=()=>{},moveToPrevHand=()=>{},calcHandScore=e=>{const a=hands[`hand${e}`].map((e=>e[0])),t=hands[`hand${e}`].map((e=>e.substring(1,e.length))),n=new Set(a).size,d=new Set(t).size,s=[["A","2","3","4","5"],["2","3","4","5","6"],["3","4","5","6","7"],["4","5","6","7","8"],["5","6","7","8","9"],["6","7","8","9","10"],["7","8","9","10","J"],["8","9","10","J","Q"],["9","10","J","Q","K"],["10","J","Q","K","A"]],r=s[9],o=t.every((e=>r.includes(e))),l=1==Number(n),i=o&&l;let c=!1,h=!1,u=!1,f=!1,g=!1,m=!1;const p=t.filter(((e,a)=>t.indexOf(e)!==a));if(new Set(p).size>=1&&(m=!0),5==d){let e=[];s.forEach(((a,n)=>{e[n]=t.every((e=>a.includes(e))),1==e[n]&&(u=!0,l&&(c=!0))}))}if(3==d){const e=t.filter(((e,a)=>t.indexOf(e)!==a));2==new Set(e).size?(g=!0,m=!0):(f=!0,m=!0)}if(2==d){const e=t.filter(((e,a)=>t.indexOf(e)!==a));if(2==new Set(e).size){m=!0,g=!0,f=!0}else h=!0,f=!0,m=!0}let y;y=i?"royal flush":c?"straight flush":h?"4 of a kind":l?"flush":u?"straight":f?"3 of a kind":g?"2 pair":m?"pair":"high card",handNames[`hand${currentHand}`]=y,document.querySelector(`.hand[data-hand="${currentHand}"] .hand-confirm-wrap`).innerHTML=`<div class='hand-result'>${y} (${baseValues[y]})</div>`,handScores[`hand${currentHand}`]=baseValues[y],totalScore=Object.values(handScores).reduce(((e,a)=>e+a),0),document.getElementById("points").innerText=totalScore};function Dialog(e){this.dialogEl=document.querySelector(`#${e}`),this.focusedElBeforeOpen;var a=this.dialogEl.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]');this.focusableEls=Array.prototype.slice.call(a),this.firstFocusableEl=this.focusableEls[0],this.lastFocusableEl=this.focusableEls[this.focusableEls.length-1],this.close()}window.addEventListener("DOMContentLoaded",(()=>{deal(),showTestButton(showTesting);for(var e=0;e<dialogs.length;e++){new Dialog(dialogs[e].id).addEventListeners(dialogs[e].id,".yz-dialog-close")}})),Dialog.prototype.open=function(e){var a,t=this,n=document.querySelectorAll('.yz-dialog[aria-hidden="false"]');if(this.dialogEl=e?document.querySelector(`#${e}`):this.dialogEl,this.focusedElBeforeOpen=document.activeElement,this.dialogEl.hasAttribute("data-yz-dialog-top")){var d=this.dialogEl.getAttribute("data-yz-dialog-top");this.dialogEl.style.top=d+"px"}document.body.classList.add("yz-dialog-fixed-page"),0==document.getElementsByClassName("yz-dialog-overlay").length?((a=document.createElement("div")).classList.add("yz-dialog-overlay"),document.body.appendChild(a)):(a=document.querySelector(".yz-dialog-overlay")).style.display="",this.dialogEl.classList.contains("yz-dialog--mobile-full")?a.classList.add("yz-dialog-overlay--mobile-full"):a.classList.remove("yz-dialog-overlay--mobile-full");for(var s=0;s<n.length;s++)n[s].setAttribute("aria-hidden",!0);a.appendChild(this.dialogEl),this.dialogEl.setAttribute("aria-hidden",!1),a.setAttribute("aria-hidden",!1),a.scrollTop=0,this.dialogEl.addEventListener("keydown",(function(e){t._handleKeyDown(e)})),a.addEventListener("click",(function(e){a===e.target&&t.close()})),this.firstFocusableEl&&this.firstFocusableEl.focus()},Dialog.prototype.close=function(e){var a=document.getElementsByClassName("yz-dialog-overlay")[0];if(document.body.classList.remove("yz-dialog-fixed-page"),e){if("false"!==document.querySelector(`#${e}`).getAttribute("aria-hidden"))return;document.querySelector(`#${e}`).setAttribute("aria-hidden",!0)}else this.dialogEl.setAttribute("aria-hidden",!0);a&&a.setAttribute("aria-hidden",!0),this.focusedElBeforeOpen&&this.focusedElBeforeOpen.focus()},Dialog.prototype._handleKeyDown=function(e){var a=this;switch(e.keyCode){case 9:if(1===a.focusableEls.length){e.preventDefault();break}e.shiftKey?document.activeElement===a.firstFocusableEl&&(e.preventDefault(),a.lastFocusableEl.focus()):document.activeElement===a.lastFocusableEl&&(e.preventDefault(),a.firstFocusableEl.focus());break;case 27:a.close()}},Dialog.prototype.addEventListeners=function(e,a){var t=this,n=document.querySelector(`[data-dialog-trigger="${e}"]`),d=document.querySelectorAll(`${a}`);n.addEventListener("click",(function(e){t.open()}));for(var s=0;s<d.length;s++)d[s].addEventListener("click",(function(){t.close()}))};var openDialog=function(e){Dialog.prototype.open(e)},closeDialog=function(e){Dialog.prototype.close(e)},dialogs=document.getElementsByClassName("yz-dialog");const showTestButton=e=>{document.getElementById("test-button").style.display=e?"flex":"done"},reset=()=>{currentHand=1,document.querySelector(".card-area").innerHTML=""},testroyalflush=()=>{reset(),hands.hand1=["♥A","♥10","♥J","♥Q","♥K"],createCards(["♥A","♥10","♥J","♥Q","♥K"])},testfullhouse=()=>{reset(),hands.hand1=["♥A","♠A","♦A","♥7","♦7"],createCards(["♥A","♠A","♦A","♥7","♦7"])},test4ofakind=()=>{reset(),hands.hand1=["♥A","♠A","♦A","♣A","♦2"],createCards(["♥A","♠A","♦A","♣A","♦2"])},testflush=()=>{reset(),hands.hand1=["♥A","♥K","♥6","♥4","♥2"],createCards(["♥A","♥K","♥6","♥4","♥2"])},test3ofakind=()=>{reset(),hands.hand1=["♥A","♦A","♥6","♣A","♥2"],createCards(["♥A","♦A","♥6","♣A","♥2"])},test2pair=()=>{reset(),hands.hand1=["♥A","♦A","♥6","♣6","♥2"],createCards(["♥A","♦A","♥6","♣6","♥2"])},teststraight=()=>{reset(),hands.hand1=["♥A","♦2","♥3","♣4","♥5"],createCards(["♥A","♦2","♥3","♣4","♥5"])},teststraightflush=()=>{reset(),hands.hand1=["♦5","♦6","♦9","♦8","♦7"],createCards(["♦5","♦6","♦9","♦8","♦7"])};