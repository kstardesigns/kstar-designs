<div class="bh-conversation-chat">
    <ng-container *ngIf="chatMessages$ | async as chatMessages">
        <ng-container *ngFor="let message of chatMessages; let i = index">
            @if (message.startsWith('ui:')) {
                <bh-user-input [response]="message.slice(3)"></bh-user-input>
            }

            @if (message.startsWith('so:') && message.length > 3) {
                <bh-system-output *ngIf="message.startsWith('so:')" [responseIsReady]="true" [response]="message.slice(3)"></bh-system-output>
            }
            
            @if (message.startsWith('so:') && message.length == 3) {
                <bh-system-output></bh-system-output>
            }
        </ng-container>
    </ng-container>
</div>